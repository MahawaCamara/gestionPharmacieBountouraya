{% load static %}

<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>PharmaConnect</title>
  <meta name="description" content="">
  <meta name="keywords" content="">

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <!-- Favicons -->
  <link href="{% static 'assets/img/doctors/logoClair.png' %}" rel="icon">
  <link href="{% static 'assets/img/doctors/logoClair.png' %}" rel="apple-touch-icon">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Raleway:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="{% static '/assets/vendor/bootstrap/css/bootstrap.min.css' %}" rel="stylesheet">
  <link href="{% static '/assets/vendor/bootstrap-icons/bootstrap-icons.css' %}" rel="stylesheet">
  <link href="{% static '/assets/vendor/aos/aos.css' %}" rel="stylesheet">
  <link href="{% static '/assets/vendor/fontawesome-free/css/all.min.css' %}" rel="stylesheet">
  <link href="{% static '/assets/vendor/glightbox/css/glightbox.min.css' %}" rel="stylesheet">
  <link href="{% static '/assets/vendor/swiper/swiper-bundle.min.css' %}" rel="stylesheet">
  <!-- Main CSS File -->
  <link href="{% static '/assets/css/main.css' %}" rel="stylesheet">
  <link href="{% static 'assets/css/interfaceStyle.css' %}" rel="stylesheet">

  <!-- =======================================================
  * Template Name: Medilab
  * Template URL: https://bootstrapmade.com/medilab-free-medical-bootstrap-theme/
  * Updated: Aug 07 2024 with Bootstrap v5.3.3
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
</head>

<body class="index-page">
<!-- Le Header de la page -->
<header id="header" class="header sticky-top">
  <!-- Topbar -->
  <div class="topbar d-flex align-items-center" id="topbar">
    <div
      class="container d-flex justify-content-center justify-content-md-between"
    >
      <div class="contact-info d-flex align-items-center">
        <i class="bi bi-envelope d-flex align-items-center"
          ><a href="mailto:contact@example.com"
            >pharmaconnect200@gmail.com</a
          ></i
        >
        <i class="bi bi-phone d-flex align-items-center ms-4"
          ><span>+224 625 70 47 40</span></i
        >
      </div>
      <div class="social-links d-none d-md-flex align-items-center">
        <a href="#" class="twitter"><i class="bi bi-twitter-x"></i></a>
        <a href="#" class="facebook"><i class="bi bi-facebook"></i></a>
        <a href="#" class="instagram"><i class="bi bi-instagram"></i></a>
        <a href="#" class="linkedin"><i class="bi bi-linkedin"></i></a>
      </div>
    </div>
  </div>
  <!-- End Top Bar -->

  <div class="branding d-flex align-items-center">
    <div
      class="container position-relative d-flex align-items-center justify-content-between"
    >
      <a href="#hero" class="logo d-flex align-items-center me-auto">
        <h3 class="sitename">PharmaConnect</h3>
      </a>

      <nav id="navmenu" class="navmenu">
        <ul>
          <li><a href="#hero" class="active">Accueil</a></li>
          <li><a href="#about">A propos</a></li>
          <li><a href="#produits">Produits</a></li>
          <li><a href="#services">Services</a></li>
          <li><a href="#contact">Contact</a></li>
          <li><a href="{% url 'rejoindre' %}">Nous rejoindre</a></li>
          <li class="dropdown">
            <a href="#"
              ><span>Filtrer par: </span>
              <i class="bi bi-chevron-down toggle-dropdown"></i
            ></a>
            <ul>
              <!-- TYPE -->
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-bs-toggle="dropdown"
                  >Type</a
                >
                <ul class="dropdown-menu p-1" style="max-height: 150px; overflow-y: auto;">
                  {% for type in types %}
                  <li>
                    <a
                      href="#"
                      class="dropdown-item"
                      data-filter="type"
                      data-value="{{ type }}"
                      >{{ type }}</a
                    >
                  </li>
                  {% endfor %}
                </ul>
              </li>
              <!-- Exemple de menu déroulant villes avec scroll -->
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-bs-toggle="dropdown"
                  >Villes</a
                >
               <ul class="dropdown-menu p-1" style="max-height: 150px; overflow-y: auto;">
                  {% for ville in villes %}
                  <li>
                    <a
                      href="#"
                      class="dropdown-item"
                      data-filter="localite"
                      data-value="{{ ville }}"
                      >{{ ville }}</a
                    >
                  </li>
                  {% endfor %}
                </ul>
              </li>

              <!-- PRIX -->
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-bs-toggle="dropdown"
                  >Prix</a
                >
                <ul class="dropdown-menu">
                  <li>
                    <a
                      href="#"
                      class="dropdown-item"
                      data-filter="prix"
                      data-value="asc"
                      >Prix croissant</a
                    >
                  </li>
                  <li>
                    <a
                      href="#"
                      class="dropdown-item"
                      data-filter="prix"
                      data-value="desc"
                      >Prix décroissant</a
                    >
                  </li>
                </ul>
              </li>
            </ul>
          </li>

          <!-- Icône de recherche dans la navigation -->
          <li class="search-icon-item">
            <a href="#" id="searchToggle">
              <i class="bi bi-search"></i>
            </a>
          </li>
        </ul>

        <!-- Icône mobile -->
        <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
        <div class="icons">
          <a href="cart.html" class="icons-btn d-inline-block bag">
            <span class="icon-shopping-bag"></span>
          </a>
        </div>
      </nav>
    </div>
  </div>

  <!-- Barre de recherche (remplace la topbar) -->
  <div class="topbar-search" id="topbarSearch" style="display: none">
    <div class="container">
      <div class="search-container">
        <!-- AJOUT de id="search-input" -->
        <input
          type="text"
          id="search-input"
          placeholder="Rechercher un produit"
          class="search-input"
        />
        <button id="searchClose" class="search-close">
          <i class="bi bi-x"></i>
        </button>
        <div
          id="loading-spinner"
          class="spinner-border text-primary position-absolute top-50 end-0 translate-middle-y d-none"
          role="status"
          style="width: 1.5rem; height: 1.5rem"
        >
          <span class="visually-hidden">Chargement...</span>
        </div>
      </div>
    </div>
  </div>
  <div id="search-results" class="container mt-3"></div>
</header>

<!-- Le Main de la page -->
  <main class="main">
    {% block contenu %}
    <!-- Hero Section -->
    <section id="hero" class="hero section light-background">
      <img src="{% static '/assets/img/hero-bg.jpg' %}" alt="" data-aos="fade-in">
      <div class="container position-relative">
        <div class="welcome position-relative" data-aos="fade-down" data-aos-delay="100">
          <h2>Bienvenue chez PharmaConnect</h2>
          <p>Besoin d'un médicament ? Trouvez-le en un clic.<br>
                Connectez-vous, comparez les prix et gagnez du temps.<br>
                La santé n'attend pas, nous non plus !</p>
        </div>    
        <div class="content row gy-4">
          <div class="col-lg-4 d-flex align-items-stretch">
            <div class="why-box" data-aos="zoom-out" data-aos-delay="200">
              <h3>Pourquoi Choisir PharmaConnect?</h3>
              <i class="bi bi-check-lg" style="font-size: 1rem; color: color: bleue;"></i><span style="display: inline;">Gain de temps : </span>recherche instantanée des medicaments.</br>
              <i class="bi bi-check-lg" style="font-size: 1rem; color: color: bleue;"></i><span style="display: inline;">Fiabilité : </span>Données mise à jour en temps. </br>
              <i class="bi bi-check-lg" style="font-size: 1rem; color: color: bleue;"></i><span style="display: inline;">Accessibilité : </span>Une solution simple pour tous , patients et pharmacies.</br>
              <i class="bi bi-check-lg" style="font-size: 1rem; color: color: bleue;"></i><span style="display: inline;">Innovation : </span>Une technologie au service de la santé.         
              <div class="text-center">
                <a href="#about" class="more-btn"><span>Savoir plus</span> <i class="bi bi-chevron-right"></i></a>
              </div>
            </div>
          </div><!-- End Why Box -->
        </div><!-- End  Content-->

      </div>
      
    </section><!-- /Hero Section -->

    <!-- About Section -->
    <section id="about" class="about section">

      <div class="container">

        <div class="row gy-4 gx-5">

          <div class="col-lg-6 position-relative align-self-start" data-aos="fade-up" data-aos-delay="200">
            <img src="{% static '/assets/img/about.jpg' %}" class="img-fluid" alt="" style="height: 1000px; width: 100%; object-fit: cover;">
          </div>
        
          <div class="col-lg-6 content" data-aos="fade-up" data-aos-delay="100">
            <h3>About Us</h3>
            <p>
              <span class ="fs-5 text-primary">PharmaConnect</span> est une plateforme innovante conçue pour améliorer l'accès aux médicaments en facilitant l'interconnexion entre les pharmacies et les patients. Notre mission est d'offrir une solution
               simple et efficace permettant à chacun de trouver rapidement les médicaments dont il a besoin , tout en optimissant la gestion des stocks des pharmacies.
             </p>
            <ul>
              <li>
                <i class="fa-solid fa-vial-circle-check"></i>
                <div>
                  <h5>Notre vision</h5>
                  <p>Nous croyons en un monde où personne ne devrait perdre du temps à chercher un médicament.
                  Grâce à la technologie, nous souhaitons crrér un réseau dynamique de pharmacies interconnectées, offrant aux utilisateurs une information fiable, en temps réel, sur la disponibilités des produits.</p>
                </div>
              </li>
              <li>
                <i class="fa-solid fa-pump-medical"></i>
                <div>
                  <h5>Ce que nous proposons</h5>
                  <p><span class = "fs-5">. Une plateforme intuitive</span> permettant aux pharmacies d'enregistrer et de mettre à jour leur stock en temps réel.</p>
                  <p><span class = "fs-5">. Un moteur de recherche avancé</span> permettant aux utilisateurs de localiser rapidement un médicament disponible près de chez eux.</p>
                  <p><span class = "fs-5">. Une comparaison des prix et des pharmacies,</span> pour que les patients puissent faire des choix éclairés.</p>
                  <p><span class = "fs-5">.Un gain de temps et d'éfficacité</span>, aussi bien pour les patients que les professionnels de santé.</p>
                </div>
              </li>
              <li>
                <i class="fa-solid fa-heart-circle-xmark"></i>
                <div>
                  <h5>Nos valeurs</h5>
                  <p><span class ="fs-5"> Accessibilité : </span> Offrir un service facile d'utilisation pour tous.</p>
                  <p><span class ="fs-5"> Innovation : </span> utiliser la technologie pour améliorer l'accès aux soins.</p>
                  <p><span class ="fs-5"> Collaboration : </span> Travailler main dans la main avec les pharmacies et les professionnels de santé.</p>
                  <p><span class ="fs-5"> Fiabilité : </span> Assurer des données à jour et une expérience utilisateur fluide.</p>
                </div>
              </li>
            </ul>
          </div>

        </div>

      </div>

    </section><!-- /About Section -->

    <!-- Stats Section -->
    <section id="stats" class="stats section light-background">

      <div class="container" data-aos="fade-up" data-aos-delay="100">

        <div class="row gy-4">

          <div class="col-lg-3 col-md-6 d-flex flex-column align-items-center">
          <i class="fa-solid fa-user-doctor"></i>
          <div class="stats-item">
            <span class="purecounter" data-purecounter-start="0" data-purecounter-end="{{ total_pharmacies }}" data-purecounter-duration="1"></span>
            <p>Nombre total de pharmacies enrégistrées</p>
          </div>
        </div>

        <div class="col-lg-3 col-md-6 d-flex flex-column align-items-center">
          <i class="fa-regular fa-hospital"></i>
          <div class="stats-item">
            <span class="purecounter" data-purecounter-start="0" data-purecounter-end="{{ total_produits }}" data-purecounter-duration="1"></span>
            <p>Nombre total de produits enrégistrés</p>
          </div>
        </div>

        <div class="col-lg-3 col-md-6 d-flex flex-column align-items-center">
          <i class="fas fa-flask"></i>
          <div class="stats-item">
            <span class="purecounter" data-purecounter-start="0" data-purecounter-end="{{ total_visiteurs }}" data-purecounter-duration="1"></span>
            <p>Nombre de personnes ayant visité le site</p>
          </div>
        </div>

        <div class="col-lg-3 col-md-6 d-flex flex-column align-items-center">
          <i class="fas fa-award"></i>
          <div class="stats-item">
            <span class="purecounter" data-purecounter-start="0" data-purecounter-end="{{ total_recherches }}" data-purecounter-duration="1"></span>
            <p>Nombre total de recherches effectuées</p>
          </div>
        </div>

        </div>

      </div>

    </section><!-- /Stats Section -->

    <!-- Produits recents Section -->
    <section id="produits" class="services section">
      
      <div class="container section-title" data-aos="fade-up">
        <h2>Médicaments récents</h2>
        <p>Découvrez les derniers médicaments disponibles dans nos pharmacies partenaires</p>
      </div>
      <div class="container">
        <div id="carouselProduits" class="carousel slide" data-bs-ride="carousel">
          <div class="carousel-inner">
            {% for group in grouped_availabilities %}
              <div class="carousel-item {% if forloop.first %}active{% endif %}">
                <div class="row gy-4">
                  {% for availability in group %}
                    {% with product=availability.product pharmacy_user=availability.pharmacy %}
                      {% with pharmacy=pharmacy_user.pharmacy %}
                        <div class="col-lg-4 col-md-6" data-aos="fade-up" data-aos-delay="{{ forloop.counter0|add:'1' }}00">
                          <div class="service-item position-relative">
                            <h3>{{ product.name }}</h3>
                            {% if product.image %}
                              <img src="{{ product.image.url }}" alt="{{ product.name }}" class="img-fluid rounded" style="height: 180px; object-fit: cover; margin-top: 10px;">
                            {% endif %}

                            <p><strong>Pharmacie :</strong> {{ availability.pharmacy.pharmacy_name }}</p>
                            <p><strong>Localité :</strong> {{ availability.pharmacy.address }}</p>
                            <p><strong>Prix :</strong> {{ availability.price }} FNG</p>

                            <a href="" class="stretched-link"></a>
                          </div>
                        </div>
                      {% endwith %}
                    {% endwith %}
                  {% endfor %}
                </div>
              </div>
            {% endfor %}
          </div>
          <!-- Flèches de navigation -->
          <button class="carousel-control-prev" type="button" data-bs-target="#carouselProduits" data-bs-slide="prev">
            <span class="carousel-control-prev-icon"></span>
          </button>
          <button class="carousel-control-next" type="button" data-bs-target="#carouselProduits" data-bs-slide="next">
            <span class="carousel-control-next-icon"></span>
          </button>
        </div>
      
      </div>
    
    </section>
    <!-- /Produits recents Section -->

    <!-- Services Section -->
    <section id="services" class="doctors section">

      <!-- Section Title -->
      <div class="container section-title" data-aos="fade-up">
        <h2>Services</h2>
        <p><span class ="fs-5 text-primary">PharmaConnect</span> , nous proposons une plateforme innovante pour améliorer l'accès aux médicaments et optimiser la gestion des stocks des pharmacies.
        Nos services sont conçus pour répondre aux besoins des patients et des professionnels de la santé.</p>
      </div><!-- End Section Title -->

      <div class="container">

        <div class="row gy-4">

          <div class="col-lg-6" data-aos="fade-up" data-aos-delay="100">
            <div class="team-member d-flex align-items-start">
              <div class="pic"><img src="{% static '/assets/img/doctors/doctors-1.jpg' %}" class="img-fluid" alt=""></div>
              <div class="member-info">
                <h4>Récherche de Médicaments en Temps Réel</h4>
                <span style="display: inline;">Nous permettons aux utilisateurs de rechercher un médicament et d'obténir instantanément : </span>
                <p><i class="bi bi-check-lg" style="font-size: 1rem; color: color: bleue;"></i>La liste des pharmacies qui l'ont en stock</br>
                  <i class="bi bi-check-lg" style="font-size: 1rem; color: color: Bleue;"></i> La recherche des pharmacies les plus proches.</br>
                  <i class="bi bi-check-lg" style="font-size: 1rem; color: color: Bleue;"></i> Une comparaison des prix.</br>
                </p>
              </div>
            </div>
          </div><!-- End Team Member -->

          <div class="col-lg-6" data-aos="fade-up" data-aos-delay="200">
            <div class="team-member d-flex align-items-start">
              <div class="pic"><img src="{% static '/assets/img/doctors/doctors-2.jpg' %}" class="img-fluid" alt=""></div>
              <div class="member-info">
                <h4>Gestion Simplifée pour les pharmacies</h4>
                <span style="display: inline;">Notre plateforme offre aux pharmacies une interface intuitive pour : </span>
                <p><i class="bi bi-check-lg" style="font-size: 1rem; color: color: bleue;"></i> Enregistrer et mettre à jour facilement leur stock de medicaments</br>
                   <i class="bi bi-check-lg" style="font-size: 1rem; color: color: Bleue;"></i> Améliorer leur visibilité auprès des patients.</br>
                </p>
              </div>
            </div>
          </div><!-- End Team Member -->

          <div class="col-lg-6" data-aos="fade-up" data-aos-delay="300">
            <div class="team-member d-flex align-items-start">
              <div class="pic"><img src="{% static '/assets/img/doctors/doctors-3.jpg' %}" class="img-fluid" alt=""></div>
              <div class="member-info">
                <h4>Interconnexion et Collaboration </h4>
                   <span style="display: inline;">Nous facillitons la collaboration entre pharmacies pour : </span>
                   <p><i class="bi bi-check-lg" style="font-size: 1rem; color: color: bleue;"></i> Permettre le transfert de médicaments en cas de besoin urgent.</br>
                   <i class="bi bi-check-lg" style="font-size: 1rem; color: color: Bleue;"></i> Eviter la perte de clients due aux ruptures de stock.</br>
                   <i class="bi bi-check-lg" style="font-size: 1rem; color: color: Bleue;"></i> Renforcer le réseau pharmaceutique local.</br>
                  </p>
              </div>
            </div>
          </div><!-- End Team Member -->

          <div class="col-lg-6" data-aos="fade-up" data-aos-delay="400">
            <div class="team-member d-flex align-items-start">
              <div class="pic"><img src="{% static '/assets/img/doctors/doctors-4.jpg' %}" class="img-fluid" alt=""></div>
                <div class="member-info">
                   <h4>Sécurité et Fiabilité des Données</h4>
                   <span style="display: inline;">Nous garantissons un service sécurité avec : </span>
                   <p><i class="bi bi-check-lg" style="font-size: 1rem; color: color: bleue;"></i> Une mise à jour régulière des stocks.</br>
                   <i class="bi bi-check-lg" style="font-size: 1rem; color: color: Bleue;"></i> Un respect strict des réglementations en matière de données de santé.</br>
                   <i class="bi bi-check-lg" style="font-size: 1rem; color: color: Bleue;"></i> Une expérience fluide et intuitive pour tous les utilisateurs.</br>
                  </p>

                </div>
              </div>
            </div>
          </div><!-- End Team Member -->
        </div>
      </div>

    </section><!-- /Services -->

    <!-- Contact Section -->
    <section id="contact" class="contact section">

      <!-- Section Title -->
      <div class="container section-title" data-aos="fade-up">
        <h2>Contact</h2>
        <p>En cas de problème ou pour toute assistance, n’hésitez pas à nous contacter. Nous sommes disponibles pour répondre à vos préoccupations.</p>
      </div>

      <div class="container" data-aos="fade-up" data-aos-delay="100">

        <div class="row gy-4">

          <div class="col-lg-4">
            <div class="info-item d-flex" data-aos="fade-up" data-aos-delay="300">
              <i class="bi bi-geo-alt flex-shrink-0"></i>
              <div>
                <h3>Adresse</h3>
                <p>Conakry, Commune de Maneah, Bentouraya</p>
              </div>
            </div><!-- End Info Item -->

            <div class="info-item d-flex" data-aos="fade-up" data-aos-delay="400">
              <i class="bi bi-telephone flex-shrink-0"></i>
              <div>
                <h3>Appelez-nous</h3>
                <p>+224 625 70 47 40</p>
              </div>
            </div><!-- End Info Item -->

            <div class="info-item d-flex" data-aos="fade-up" data-aos-delay="500">
              <i class="bi bi-envelope flex-shrink-0"></i>
              <div>
                <h3>Email Us</h3>
                <p>pharmaconnect200@gmail.com</p>
              </div>
            </div><!-- End Info Item -->

          </div>

          <div class="col-lg-8">
            <form method="post" action="{% url 'home' %}" class="php-email-form" id="contact-form">
              {% csrf_token %}
              {% if messages %}
                  <script>
                    document.addEventListener('DOMContentLoaded', function() {
                      {% for message in messages %}
                        Swal.fire({
                          icon: '{% if message.tags == "success" %}success{% elif message.tags == "error" %}error{% else %}info{% endif %}',
                          title: '{{ message }}',
                          confirmButtonText: 'OK'
                        });
                      {% endfor %}
                    });
                    Swal.fire({
                      icon: 'success',
                      title: '{{ message }}',
                      confirmButtonText: 'OK',
                      width: '300px'  // Réduit la largeur à 300px, tu peux ajuster
                    });
                  </script>
              {% endif %}

              <div class="row gy-4">
                  <div class="col-md-6">
                    <input type="text" name="name" class="form-control" placeholder="Votre nom" required>
                  </div>

                  <div class="col-md-6">
                    <input type="email" name="email" class="form-control" placeholder="Votre email" required>
                  </div>

                  <div class="col-md-12">
                    <input type="text" name="subject" class="form-control" placeholder="Sujet" required>
                  </div>

                  <div class="col-md-12">
                    <textarea name="message" class="form-control" rows="6" placeholder="Message" required></textarea>
                  </div>

                  <div class="col-md-12 text-center">
                    <button type="submit">Envoyer</button>
                  </div>
                </div>
              </form>

          </div><!-- End Contact Form -->

        </div>

      </div>

    </section>
    <!-- /Contact Section -->

  </main>
  {% endblock %}
  <!-- Le Footer de la page -->
  <footer id="footer" class="footer light-background">

    <div class="container footer-top">
      <div class="row gy-4">
        <div class="col-lg-4 col-md-6 footer-about">
          <a href="index.html" class="logo d-flex align-items-center">
            <span class="sitename">Medilab</span>
          </a>
          <div class="footer-contact pt-3">
            <p>A108 Adam Street</p>
            <p>New York, NY 535022</p>
            <p class="mt-3"><strong>Phone:</strong> <span>+1 5589 55488 55</span></p>
            <p><strong>Email:</strong> <span>info@example.com</span></p>
          </div>
          <div class="social-links d-flex mt-4">
            <a href=""><i class="bi bi-twitter-x"></i></a>
            <a href=""><i class="bi bi-facebook"></i></a>
            <a href=""><i class="bi bi-instagram"></i></a>
            <a href=""><i class="bi bi-linkedin"></i></a>
          </div>
        </div>

        <div class="col-lg-2 col-md-3 footer-links">
          <h4>Useful Links</h4>
          <ul>
            <li><a href="#">Home</a></li>
            <li><a href="#">About us</a></li>
            <li><a href="#">Services</a></li>
            <li><a href="#">Terms of service</a></li>
            <li><a href="#">Privacy policy</a></li>
          </ul>
        </div>

        <div class="col-lg-2 col-md-3 footer-links">
          <h4>Our Services</h4>
          <ul>
            <li><a href="#">Web Design</a></li>
            <li><a href="#">Web Development</a></li>
            <li><a href="#">Product Management</a></li>
            <li><a href="#">Marketing</a></li>
            <li><a href="#">Graphic Design</a></li>
          </ul>
        </div>

        <div class="col-lg-2 col-md-3 footer-links">
          <h4>Hic solutasetp</h4>
          <ul>
            <li><a href="#">Molestiae accusamus iure</a></li>
            <li><a href="#">Excepturi dignissimos</a></li>
            <li><a href="#">Suscipit distinctio</a></li>
            <li><a href="#">Dilecta</a></li>
            <li><a href="#">Sit quas consectetur</a></li>
          </ul>
        </div>

        <div class="col-lg-2 col-md-3 footer-links">
          <h4>Nobis illum</h4>
          <ul>
            <li><a href="#">Ipsam</a></li>
            <li><a href="#">Laudantium dolorum</a></li>
            <li><a href="#">Dinera</a></li>
            <li><a href="#">Trodelas</a></li>
            <li><a href="#">Flexo</a></li>
          </ul>
        </div>

      </div>
    </div>

    <div class="container copyright text-center mt-4">
      <p>© <span>Copyright</span> <strong class="px-1 sitename">Medilab</strong> <span>All Rights Reserved</span></p>
      <div class="credits">
        <!-- All the links in the footer should remain intact. -->
        <!-- You can delete the links only if you've purchased the pro version. -->
        <!-- Licensing information: https://bootstrapmade.com/license/ -->
        <!-- Purchase the pro version with working PHP/AJAX contact form: [buy-url] -->
        Designed by <a href="https://bootstrapmade.com/">BootstrapMade</a> Distributed by <a href=“https://themewagon.com>ThemeWagon
      </div>
    </div>

  </footer>

  <!-- Scroll Top -->
  <a href="#" id="scroll-top" class="scroll-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <!-- Preloader -->
  <div id="preloader"></div>

  {% comment %} <script src="{% static 'assets/js/interfaceStyle.js' %}"></script> {% endcomment %}
  <!-- Vendor JS Files -->
  {% comment %} <script src="{% static '/assets/vendor/php-email-form/validate.js' %}"></script> {% endcomment %}
  <script src="{% static '/assets/vendor/aos/aos.js' %}"></script>
  <script src="{% static '/assets/vendor/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
  <script src="{% static '/assets/vendor/glightbox/js/glightbox.min.js' %}"></script>
  <script src="{% static '/assets/vendor/purecounter/purecounter_vanilla.js' %}"></script>
  <script src="{% static '/assets/vendor/swiper/swiper-bundle.min.js' %}"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<!-- Le Script de la recherche -->
<script>
document.addEventListener('DOMContentLoaded', function () {
  const searchInput = document.getElementById('search-input');
  const resultBox = document.getElementById('search-results');
  const searchToggle = document.getElementById('searchToggle');
  const topbarSearch = document.getElementById('topbarSearch');
  const searchClose = document.getElementById('searchClose');
  let debounceTimer;

  // Afficher la barre de recherche
  if (searchToggle && topbarSearch) {
    searchToggle.addEventListener('click', function (e) {
      e.preventDefault();
      topbarSearch.style.display = 'block';
      searchInput.focus();
    });
  }

  // Fermer la barre de recherche
  if (searchClose && topbarSearch) {
    searchClose.addEventListener('click', function () {
      topbarSearch.style.display = 'none';
      resultBox.innerHTML = '';
      searchInput.value = '';
      clearActiveFilters();
    });
  }

  function getActiveFilters() {
    const filters = { prix: '', type: '', localite: '' };
    document.querySelectorAll('li.dropdown ul li a.active').forEach(link => {
      const type = link.getAttribute('data-filter');
      const value = link.getAttribute('data-value');
      if (type && value) filters[type] = value;
    });
    return filters;
  }

  function clearActiveFilters() {
    document.querySelectorAll('li.dropdown ul li a.active').forEach(link => {
      link.classList.remove('active');
    });
  }

  function buildSearchURL(query, saveHistory = false) {
    const filters = getActiveFilters();
    let url = `/produit/search/?q=${encodeURIComponent(query)}`;
    if (saveHistory) url += '&save_history=true';
    if (filters.prix) url += `&prix=${encodeURIComponent(filters.prix)}`;
    if (filters.type) url += `&type=${encodeURIComponent(filters.type)}`;
    if (filters.localite) url += `&localite=${encodeURIComponent(filters.localite)}`;
    return url;
  }

  function afficherResultats(results) {
    resultBox.innerHTML = '';
    if (results.length === 0) {
      resultBox.innerHTML = `
        <div class="alert alert-warning text-center" role="alert">
          <i class="bi bi-emoji-frown"></i> Aucun résultat trouvé.
        </div>`;
      return;
    }

    results.forEach(item => {
      const row = document.createElement('div');
      row.className = 'row align-items-center p-3 mb-3 border rounded shadow-sm animate__animated animate__fadeInUp';

      let badgeEtat = '';
      if (item.etat_produit === 'expire') {
        badgeEtat = `<span class="badge bg-danger ms-2"><i class="bi bi-x-circle-fill"></i> Expiré</span>`;
      } else if (item.etat_produit === 'expire_bientot') {
        badgeEtat = `<span class="badge bg-warning text-dark ms-2"><i class="bi bi-exclamation-triangle-fill"></i> Expire bientôt</span>`;
      } else if (item.etat_produit === 'bon_etat') {
        badgeEtat = `<span class="badge bg-success ms-2"><i class="bi bi-check-circle-fill"></i> Bon état</span>`;
      }

      row.innerHTML = `
        <div class="col-md-3">
          <strong style="color: #0d6efd;">${item.nom_produit}</strong>
          ${badgeEtat}
        </div>
        <div class="col-md-3">
          <i class="bi bi-hospital"></i> ${item.nom_pharmacie}
        </div>
        <div class="col-md-3">
          <i class="bi bi-geo-alt-fill"></i> ${item.adresse_pharmacie}
        </div>
        <div class="col-md-2 text-success fw-bold">
          ${item.prix} FNG
        </div>
        <div class="col-md-1 text-end">
          <a href="${item.detail_url}" class="btn btn-sm btn-outline-primary">Détails</a>
        </div>
      `;

      resultBox.appendChild(row);
    });
  }

  function lancerRecherche(query, saveHistory = false) {
    if (!query || query.length <= 1) {
      resultBox.innerHTML = '';
      return;
    }

    resultBox.innerHTML = `
      <div class="text-center my-3" id="loading-spinner">
        <div class="spinner-border text-primary" role="status">
          <span class="visually-hidden">Chargement...</span>
        </div>
        <p class="mt-2">Recherche en cours...</p>
      </div>`;

    fetch(buildSearchURL(query, saveHistory))
      .then(response => response.json())
      .then(data => afficherResultats(data.results))
      .catch(error => {
        resultBox.innerHTML = `
          <div class="alert alert-danger" role="alert">
            Erreur de recherche : ${error.message}
          </div>`;
      });
  }

  if (searchInput) {
    // Recherche avec ENTRÉE = enregistre dans l’historique
    searchInput.addEventListener('keydown', function (event) {
      const query = this.value.trim();
      if (event.key === "Enter" && query.length > 1) {
        event.preventDefault();
        lancerRecherche(query, true);
      }
    });

    // Recherche sans ENTRÉE = pas d'enregistrement dans l’historique
    searchInput.addEventListener('input', function () {
      const query = this.value.trim();
      clearTimeout(debounceTimer);

      if (query.length === 0) {
        resultBox.innerHTML = '';
        return;
      }

      if (query.length > 1) {
        debounceTimer = setTimeout(() => lancerRecherche(query, false), 600);
      }
    });
  }

  // Gestion des sous-menus dans les filtres
  document.querySelectorAll('.dropdown-submenu > a').forEach(function (el) {
    el.addEventListener('click', function (e) {
      e.preventDefault();
      const submenu = this.nextElementSibling;
      if (submenu) submenu.classList.toggle('show');
    });
  });

  document.addEventListener('click', function (e) {
    document.querySelectorAll('.dropdown-menu.show').forEach(function (menu) {
      if (!menu.contains(e.target)) menu.classList.remove('show');
    });
  });

  // Filtres dynamiques
  document.querySelectorAll('li.dropdown ul li a').forEach(link => {
    link.addEventListener('click', function (e) {
      e.preventDefault();
      const filterType = this.getAttribute('data-filter');
      document.querySelectorAll(`a[data-filter="${filterType}"]`).forEach(el => el.classList.remove('active'));
      this.classList.add('active');
      const query = searchInput.value.trim();
      if (query.length > 1) lancerRecherche(query, false);
    });
  });
});
</script>


{% comment %} {% if messages %}
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      {% for message in messages %}
        Swal.fire({
          icon: '{% if message.tags == "success" %}success{% elif message.tags == "error" %}error{% else %}info{% endif %}',
          title: '{{ message }}',
          confirmButtonText: 'OK'
        });
      {% endfor %}
    });
    // Script pour la date
    results.forEach(item => {
  const row = document.createElement('div');
  row.className = 'row align-items-center p-2 mb-2 border rounded animate__animated animate__fadeInUp';
  row.innerHTML = `
    <div class="col-md-3"><strong style="color: skyblue;">${item.nom_produit}</strong></div>
    <div class="col-md-3"><i class="bi bi-hospital"></i> ${item.nom_pharmacie}</div>
    <div class="col-md-3"><i class="bi bi-geo-alt-fill"></i> ${item.adresse_pharmacie}</div>
    <div class="col-md-2 text-success fw-bold">${item.prix} FNG</div>
    <div class="col-md-1 text-end">
      <a href="${item.detail_url}" class="btn btn-sm btn-outline-primary">Détails</a>
    </div>
  `;

  const badge = document.createElement('div');
  badge.className = 'mt-1';

  if (item.etat_produit === 'expire_bientot') {
    badge.innerHTML = `<span class="badge bg-warning text-dark">Expire bientôt</span>`;
  } else if (item.etat_produit === 'expire') {
    badge.innerHTML = `<span class="badge bg-danger">Expiré</span>`;
  } else {
    badge.innerHTML = `<span class="badge bg-success">En bon état</span>`;
  }

  row.appendChild(badge);
  resultBox.appendChild(row);
});

  </script>
{% endif %} {% endcomment %}

  <!-- Main JS File -->
  <script src="{% static 'assets/js/main.js' %}"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

</body>
</html>